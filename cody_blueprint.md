cody_blueprint.md
Cody Blueprint: 프로젝트 메티스 (Project Metis)

프로젝트 개요
'프로젝트 메티스'는 사용자의 독서 경험을 **'지식의 복리 엔진'**으로 전환하기 위한 개인화 웹 애플리케이션입니다. **'질문 → 학습 → 체화'**의 유기적인 사이클을 통해 지식을 습득하고, 그 지식의 생명 주기를 '망각 곡선' 이론에 기반하여 과학적으로 시각화하고 관리하는 것을 목표로 합니다. 사용자는 이 시스템을 통해 지식을 정원처럼 가꾸는 동시에, 데이터 기반의 전략가로서 자신의 기억을 최적화하는 경험을 하게 됩니다.

파일 구조
index.html: 애플리케이션의 전체적인 구조와 UI 요소를 정의합니다. JavaScript 모듈과 외부 라이브러리(Chart.js)를 로드합니다.

style.css: 전체 애플리케이션의 디자인 시스템을 정의합니다. '나의 서재', '지식 정원' 등 모든 UI 요소의 스타일을 포함합니다.

/js/main.js: 애플리케이션의 진입점(Entry Point)으로서, 각 모듈을 초기화하고 뷰 전환 등 핵심 이벤트를 관리합니다.

/js/ui.js: UI 렌더링을 전담하는 모듈. '지식 정원', '기억 곡선 대시보드', '지식 정제소', '나의 서재' 등 모든 동적 UI 생성을 담당합니다.

/js/metisSession.js: '메티스 세션'의 8단계 학습 사이클 로직을 관리하며, 세션 중 '지식 조각(클리핑)'을 수집하여 '지식 정제소'로 보내는 역할을 합니다.

/js/ebbinghaus.js: '지식 정원'과 '기억 곡선 대시보드'의 모든 핵심 로직을 관리합니다. 식물의 상태 계산, 데이터 시각화, 복습 세션 진행 등을 담당합니다.

/js/refinement.js: 자청의 다회독 독서법과 에빙하우스 망각곡선 이론을 결합한 '지식 정제소' 시스템. 1일, 7일, 30일 주기로 잠금 해제되는 4단계 지식 정제 프로세스를 관리합니다.

/js/library.js: '나의 서재' 기능의 모든 로직을 관리합니다. Firebase와 연동하여 책 추가/수정/삭제, AI를 활용한 자동 분류, 핵심 스킬 분석, 연관 도서 추천, 지식 XP 시스템 등을 처리합니다.

/js/goalNavigator.js: 사용자가 입력한 책과 챕터 제목을 기반으로, Gemini API를 호출하여 3가지 레벨의 학습 목표(퀘스트)를 생성하고 제안하는 로직을 관리합니다.

/js/bookExplorer.js: Google Books API를 사용하여 책을 검색하고 '메인북 변경' 또는 '나의 서재에 추가' 기능을 수행하는 'AI 도서 탐색기' 로직을 관리합니다.

/js/api.js: 외부 API(Google Books, Gemini)와의 통신 및 API 키 중앙 관리를 담당합니다.

/functions/index.js: Firebase Cloud Functions 백엔드 로직. Gemini API와 연동하여 'AI 목표 설계자' 기능을 수행하는 서버리스 함수를 포함합니다.

변경 기록
2025-09-28 v11.8: '지식의 고도' 배경 디자인을 한층 더 사실적으로 개선. 기존 파스텔 톤 그라데이션을 깊은 우주, 생생한 일몰, 흙과 암석 질감의 땅을 표현하는 색상으로 변경하여 시각적 몰입감을 극대화함.

2025-09-28 v11.7: '지식의 고도' 배경 디자인을 실제 풍경처럼 보이도록 대폭 개선. 단조로운 색상 전환 대신, 땅-잔디-하늘-노을-밤-우주로 이어지는 훨씬 더 자연스럽고 미려한 CSS 그라데이션을 적용하여 시각적 완성도와 사용자 몰입감을 극대화함.

2025-09-28 v11.6: '지식의 고도' 기능 완성. 완독 권수에 비례하여 스크롤 가능한 전체 높이와 보이는 배경 범위가 동적으로 조절되도록 수정. 책이 적으면 '땅' 근처만, 100권 이상이면 '우주'까지 모두 탐험할 수 있게 하여 '우주비행사 관점'의 사용자 경험을 완벽하게 구현.

2025-09-28 v11.5: '지식의 고도' 스크롤-배경 매핑 오류 근본 해결. 문제의 원인을 JS가 아닌 CSS 구조로 재진단하고, 여러 개로 분리되어 있던 배경 그라데이션을 땅부터 우주까지 이어지는 하나의 거대한 통합 그라데이션으로 변경하여 스크롤 위치와 배경이 완벽히 일치하도록 수정. 이로써 '우주비행사 관점'의 사용자 경험을 최종 완성함.

2025-09-28 v11.4: 책 중복 추가 버그 및 '지식의 고도' 스크롤 로직 수정. 클릭 한 번에 여러 권의 책이 추가되던 심각한 버그를 AI 도서 탐색기의 이벤트 리스너 관리를 수정하여 해결. 또한 '지식의 고도' 스크롤 방향을 사용자 경험에 맞춰 반전시켜, 목록 최상단이 '우주', 최하단이 '땅'이 되도록 수정.

2025-09-28 v11.3: '지식의 고도' 배경 디자인 대폭 개선. 단색이었던 임시 배경을 흙, 잔디, 하늘, 노을, 우주를 모두 표현하는 풍부한 색감의 CSS 그라데이션 배경으로 교체하여 시각적 만족도와 몰입감을 크게 향상.

2025-09-28 v11.2: '지식의 고도' 배경 미표시 오류 해결. 부모 요소의 배경색이 동적 배경을 가리는 CSS 구조 문제를 수정하고, 스크롤 위치에 따라 배경 이미지가 함께 움직이는 자바스크립트 기반 패럴랙스 스크롤 효과를 구현하여 기능을 완성.

2025-09-28 v11.1: '지식의 고도' 기능의 디자인을 개선했습니다. '다 읽은 책' 선반의 책 그리드에 '프로스티드 글래스(Frosted Glass)' 효과를 적용하여, 동적인 배경 위에서도 책 표지의 가독성을 확보하고 세련된 디자인을 구현했습니다.

2025-09-28 v11.0: '나의 서재'에 '지식의 고도' 기능 구현. '다 읽은 책' 선반에서 스크롤 시 완독 권수에 따라 배경이 땅-하늘-우주로 동적으로 변화하고, 특정 구간마다 비행기, 로켓 등의 '지식 이정표'가 나타나도록 하여 독서 성취감을 시각적으로 극대화.

2025-09-28 v10.6: '나의 서재'의 '다 읽은 책' 선반에 스크롤에 따라 배경이 변화하는 '지식의 고도' 컨셉 기획. 사용자의 독서 성취감을 시각적으로 극대화하기 위해 땅-하늘-우주로 이어지는 동적 배경과, 특정 독서량을 돌파할 때마다 등장하는 '지식 이정표'(비행기, 로켓 등) 아이디어를 구체화함.

2025-09-28 v10.5: '나의 서재' 레이아웃을 4열 그리드는 유지하면서 책 표지 크기를 줄이도록 개선했습니다. 책 그리드 컨테이너에 `max-width`를 적용하고 중앙 정렬하여, 넓은 화면에서도 책이 적절한 크기로 보이도록 수정했습니다.

2025-09-28 v10.4: '나의 서재' 책 표지 크기 오류 수정. 고정 높이값으로 인해 이미지 비율이 왜곡되던 문제를 해결하고, 'aspect-ratio' 속성을 적용하여 모든 책이 4열 그리드에 일관된 비율로 표시되도록 CSS 개선.

2025-09-28 v10.3: '나의 서재' UI를 회전식(Carousel) 책장으로 변경. 화살표로 '읽고 있는 책', '읽고 싶은 책', '다 읽은 책' 선반을 전환하는 기능을 추가하여 사용성을 개선. 책은 한 줄에 4권씩 격자 배열되고, 내용이 많아지면 세로로 스크롤되도록 수정.

2025-09-28 v10.2: '나의 서재' UI/UX 대폭 개선. 실제 책장 같은 시각적 디자인을 적용하고, '서재에 새 책 추가하기' 버튼을 추가하여 책 추가 플로우를 직관적으로 개선.

2025-09-28 v10.1: '나의 서재'에 책 추가 기능 구현. 'AI 도서 탐색기'에서 검색한 책을 '읽고 있는 책', '읽고 싶은 책', '다 읽은 책' 선반에 추가하는 전체 플로우를 완성.

2025-09-28 v10.0: '나의 서재' 기능 도입. 사용자가 읽었거나 읽고 싶은 책을 관리하는 개인화된 책장 기능 추가. AI 기반 자동 카테고리 분류, 핵심 성장 스킬 분석, 지식 XP 시스템, AI 연관 도서 추천 등 게이미피케이션 및 데이터 시각화 요소를 통합하여 독서 경험을 강화.