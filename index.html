<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Project Metis: Knowledge Compounding Engine</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-date-fns/dist/chartjs-adapter-date-fns.bundle.min.js"></script>
    
    <script type="importmap">
      {
        "imports": {
          "@google/generative-ai": "https://esm.run/@google/generative-ai"
        }
      }
    </script>
    
    <style>
        :root {
            --primary-color: #4285F4;
            --primary-dark: #3367D6;
            --background-color: #f0f4f9;
            --surface-color: #ffffff;
            --text-color: #3c4043;
            --text-light-color: #5f6368;
            --border-color: #dadce0;
            --font-family: 'Noto Sans KR', sans-serif;
            --shadow: 0 1px 2px 0 rgba(60,64,67,0.3), 0 2px 6px 2px rgba(60,64,67,0.15);
            --border-radius: 8px;
            --color-healthy: #34A853;
            --color-needs-care: #FBBC04;
            --color-urgent: #EA4335;
        }
        * { box-sizing: border-box; margin: 0; padding: 0; }
        body { font-family: var(--font-family); background-color: var(--background-color); color: var(--text-color); line-height: 1.6; }
        .app-container { display: flex; height: 100vh; }
        .sidebar { width: 240px; background-color: var(--surface-color); padding: 24px; border-right: 1px solid var(--border-color); display: flex; flex-direction: column; }
        .sidebar h1 { font-size: 24px; color: var(--primary-color); margin-bottom: 32px; }
        .sidebar nav { display: flex; flex-direction: column; gap: 8px; }
        .nav-btn { display: flex; align-items: center; gap: 12px; padding: 12px 16px; border-radius: var(--border-radius); border: none; background-color: transparent; cursor: pointer; text-align: left; font-size: 16px; font-weight: 500; color: var(--text-light-color); transition: background-color 0.2s, color 0.2s; }
        .nav-btn .icon { font-size: 20px; }
        .nav-btn:hover { background-color: var(--background-color); }
        .nav-btn.active { background-color: #E8F0FE; color: var(--primary-dark); }
        .main-content { flex: 1; overflow-y: auto; padding: 32px; }
        .view { display: none; }
        .view.active { display: block; animation: fadeInView 0.5s; }
        .view-header { margin-bottom: 24px; border-bottom: 1px solid var(--border-color); padding-bottom: 16px; }
        .view-header h2 { font-size: 28px; margin-bottom: 4px; }
        .view-header p { color: var(--text-light-color); font-size: 16px; }
        .card { background-color: var(--surface-color); border-radius: var(--border-radius); border: 1px solid var(--border-color); padding: 24px; margin-bottom: 24px; }
        .btn { padding: 10px 20px; font-size: 16px; border-radius: var(--border-radius); border: 1px solid var(--border-color); background-color: var(--surface-color); cursor: pointer; font-weight: 500; transition: all 0.2s; }
        .btn:hover { background-color: #f1f3f4; }
        .btn.active { background-color: #E8F0FE; color: var(--primary-dark); border-color: var(--primary-color); }
        .btn-primary { background-color: var(--primary-color); color: white; border-color: var(--primary-color); }
        .btn-primary:hover { background-color: var(--primary-dark); border-color: var(--primary-dark); }
        .btn-secondary { background-color: transparent; color: var(--text-light-color); border: none; }
        .btn-secondary:hover { background-color: #f1f3f4; color: var(--text-color); }
        textarea, input[type="text"] { width: 100%; padding: 12px; border: 1px solid var(--border-color); border-radius: var(--border-radius); font-family: var(--font-family); font-size: 16px; margin-bottom: 16px; }
        textarea:focus, input[type="text"]:focus { outline: 2px solid var(--primary-color); border-color: var(--primary-color); }
        textarea { min-height: 120px; resize: vertical; }
        .dashboard-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 24px; }
        .main-book-slot { grid-column: 1 / 2; grid-row: 1 / 3; }
        .book-info { display: flex; gap: 20px; margin-bottom: 16px; }
        .book-cover { width: 150px; height: auto; object-fit: cover; border-radius: var(--border-radius); box-shadow: var(--shadow); flex-shrink: 0; }
        .book-details { display: flex; flex-direction: column; }
        .book-details h4 { font-size: 20px; }
        .book-details .goal { margin-top: 16px; }
        .main-book-slot .btn-primary { width: 100%; padding: 16px; font-size: 18px; margin-top: 16px; }
        .sub-book-shelf-container { grid-column: 2 / 3; }
        .sub-book-shelf { display: flex; gap: 16px; overflow-x: auto; padding-bottom: 10px; }
        .sub-book-cover { height: 120px; border-radius: 4px; box-shadow: var(--shadow); }
        .course-selection { margin-top: 16px; }
        .course-selection h5 { margin-bottom: 8px; color: var(--text-light-color); display: flex; align-items: center; gap: 8px;}
        .course-buttons { display: flex; gap: 8px; flex-wrap: wrap; }
        .course-btn { flex-grow: 1; }
        .tooltip-icon { cursor: pointer; font-style: normal; display: inline-block; width: 20px; height: 20px; text-align: center; line-height: 20px; border-radius: 50%; background-color: var(--border-color); color: var(--text-light-color); font-weight: 700;}
        #course-tooltip { position: absolute; background-color: var(--text-color); color: white; padding: 12px; border-radius: var(--border-radius); z-index: 10; width: 300px; font-size: 14px; line-height: 1.5; box-shadow: var(--shadow); display: none; pointer-events: none; }
        #course-tooltip h6 { font-size: 15px; margin-bottom: 8px; border-bottom: 1px solid #777; padding-bottom: 4px;}
        #course-tooltip p { font-size: 13px; margin-bottom: 6px;}

        /* Modal Styles */
        .modal-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0, 0, 0, 0.6); display: none; justify-content: center; align-items: center; z-index: 1000; animation: fadeIn 0.3s; }
        .modal-content { background: var(--surface-color); padding: 32px; border-radius: var(--border-radius); width: 90%; max-width: 700px; max-height: 90vh; display: flex; flex-direction: column; animation: fadeIn 0.3s; }
        .modal-body { overflow-y: auto; }
        .modal-header { text-align: center; margin-bottom: 24px; flex-shrink: 0; }
        .modal-header h3 { font-size: 24px; margin-bottom: 8px; }
        .modal-controls { margin-top: 24px; display: flex; justify-content: flex-end; gap: 8px; flex-shrink: 0;}

        /* Book Explorer Modal */
        #book-search-results { display: grid; grid-template-columns: repeat(auto-fill, minmax(120px, 1fr)); gap: 16px; margin-top: 24px; }
        .book-result-card { cursor: pointer; text-align: center; }
        .book-result-card img { width: 100%; height: auto; border-radius: 4px; box-shadow: var(--shadow); transition: transform 0.2s; }
        .book-result-card:hover img { transform: scale(1.05); }
        #book-explorer-confirmation { text-align: center; }
        #book-explorer-confirmation img { max-width: 180px; margin: 16px auto; border-radius: var(--border-radius); box-shadow: var(--shadow); }

        /* Goal Navigator Modal */
        .quest-selection-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap: 16px; margin-top: 24px; }
        .quest-card { border: 2px solid var(--border-color); padding: 16px; border-radius: var(--border-radius); cursor: pointer; transition: all 0.2s; display: flex; flex-direction: column; }
        .quest-card:hover { border-color: var(--primary-color); background-color: #f8f9fa; }
        .quest-card h5 { color: var(--primary-dark); }
        
        /* Metis Session */
        #metis-session-view { max-width: 800px; margin: 0 auto; }
        .goal-display { background-color: var(--background-color); border-left: 4px solid var(--primary-color); padding: 16px; margin-bottom: 24px; }
        .step { display: none; }
        .step.active { display: block; animation: fadeInView 0.5s; }
        .step-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 16px;}
        .step h4 { font-size: 22px; margin: 0; }
        .step-timer { font-size: 18px; font-weight: 700; color: var(--primary-dark); }
        .timer-display { font-size: 48px; font-weight: 700; text-align: center; color: var(--primary-dark); margin: 24px 0; }
        .comparison-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 16px; margin-bottom: 24px; }
        .comparison-col h5 { margin-bottom: 8px; color: var(--text-light-color); }
        .comparison-content { background-color: #f8f9fa; border: 1px solid var(--border-color); border-radius: var(--border-radius); padding: 16px; min-height: 150px; overflow-y: auto; }
        #prediction-options { display: none; margin-top: 16px; } /* ì‹¬í™” ì˜ˆì¸¡ ë²„íŠ¼ */
        
        /* ì§€ì‹ ì •ì œì†Œ UI ìŠ¤íƒ€ì¼ */
        #refinement-section { margin-top: 24px; }
        .refinement-card { 
            display: flex; align-items: center; gap: 16px; 
            padding: 16px; border: 1px solid var(--border-color);
            border-radius: var(--border-radius); background-color: var(--surface-color);
            margin-bottom: 12px;
        }
        .refinement-card img { width: 40px; height: 60px; object-fit: cover; border-radius: 4px; }
        .refinement-info p { margin: 0; font-weight: 500; }
        .refinement-info .status { font-size: 14px; color: var(--text-light-color); }
        .refinement-card .btn { margin-left: auto; }
        
        /* í´ë¦¬í•‘ ë¦¬ë·° ë·° ìŠ¤íƒ€ì¼ */
        #clipping-review-view .clipping-item {
            padding: 16px;
            margin-bottom: 12px;
            border: 1px solid var(--border-color);
            border-radius: var(--border-radius);
        }
        .clipping-item.highlighted { background-color: #fffbe6; border-color: #ffe58f; }
        .clipping-text::selection { background: #ffe58f; }
        .clipping-controls { margin-top: 10px; display: flex; gap: 8px; align-items: center; }
        .note-input { display: none; margin-top: 10px; }

        /* Other UI Styles */
        .loader-overlay { display: none; flex-direction: column; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0,0,0,0.6); justify-content: center; align-items: center; z-index: 2000; }
        .loader { border: 6px solid rgba(255,255,255,0.3); border-top: 6px solid var(--primary-color); border-radius: 50%; width: 50px; height: 50px; animation: spin 1s linear infinite; }
        .loader-text { color: white; margin-top: 16px; font-size: 16px; }
        .empty-message { text-align: center; color: var(--text-light-color); grid-column: 1 / -1; padding: 40px; }
        .garden-container { display: grid; grid-template-columns: repeat(auto-fill, minmax(250px, 1fr)); gap: 24px; }
        .plant-card { background-color: var(--surface-color); border-radius: var(--border-radius); border: 1px solid var(--border-color); border-left: 5px solid; padding: 16px; transition: all 0.2s; cursor: pointer; }
        .plant-card:hover { transform: translateY(-5px); box-shadow: var(--shadow); }
        .plant-card.healthy { border-left-color: var(--color-healthy); }
        .plant-card.needs-care { border-left-color: var(--color-needs-care); }
        .plant-card.urgent { border-left-color: var(--color-urgent); }
        .plant-title { font-weight: 700; margin-bottom: 8px; }
        .plant-source { font-size: 14px; color: var(--text-light-color); margin-bottom: 12px; }
        .plant-status { font-size: 14px; font-weight: 500; }
        #journey-map-container { position: relative; width: 100%; height: 75vh; background-color: var(--surface-color); border-radius: var(--border-radius); border: 1px solid var(--border-color); overflow: hidden; }
        .journey-node { position: absolute; background-color: var(--primary-color); color: white; border-radius: 50%; display: flex; justify-content: center; align-items: center; text-align: center; font-size: 14px; padding: 5px; box-shadow: var(--shadow); cursor: pointer; transition: transform 0.2s; user-select: none; }
        .journey-node:hover { transform: scale(1.1); z-index: 20 !important; }
        .journey-node.book { width: 100px; height: 100px; background-color: var(--primary-dark); z-index: 10; font-weight: 700; }
        .journey-node.plant { width: 70px; height: 70px; font-size: 11px; z-index: 5; }
        #journey-map-svg { position: absolute; top: 0; left: 0; width: 100%; height: 100%; z-index: 1; pointer-events: none; }
        .toast { position: fixed; bottom: -100px; left: 50%; transform: translateX(-50%); background-color: var(--text-color); color: white; padding: 12px 24px; border-radius: var(--border-radius); z-index: 2000; opacity: 0; transition: bottom 0.5s ease, opacity 0.5s ease; }
        .toast.success { background-color: var(--color-healthy); }
        .toast.error { background-color: var(--color-urgent); }

        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        @keyframes fadeInView { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
    </style>
</head>
<body>
    <div class="app-container">
        <aside class="sidebar">
            <h1>Project Metis</h1>
            <nav>
                <button class="nav-btn active" data-view="dashboard">ğŸ  ëŒ€ì‹œë³´ë“œ</button>
                <button class="nav-btn" data-view="garden">ğŸŒ¿ ì§€ì‹ ì •ì›</button>
                <button class="nav-btn" data-view="journey">ğŸ—ºï¸ ì§€ì  ì—¬ì • ë§µ</button>
            </nav>
        </aside>

        <main class="main-content">
            <div id="dashboard" class="view active">
                <header class="view-header">
                    <h2>ì˜¤ëŠ˜ì˜ ì§€ì‹ íƒí—˜</h2>
                    <p>ë©”ì¸ë¶ì„ ì¤‘ì‹¬ìœ¼ë¡œ ìƒˆë¡œìš´ ì§€ì‹ì„ íƒí—˜í•˜ê³ , ë‹¹ì‹ ì˜ ìì‚°ìœ¼ë¡œ ë§Œë“œì„¸ìš”.</p>
                </header>

                <div id="refinement-section" class="card">
                    <h3>ğŸ’ ì§€ì‹ ì •ì œì†Œ</h3>
                    <div id="refinement-list">
                        <p class="empty-message">ì •ì œ ì¤‘ì¸ ì§€ì‹ì´ ì—†ìŠµë‹ˆë‹¤.</p>
                    </div>
                </div>

                <div class="dashboard-grid">
                    <div id="main-book-slot" class="main-book-slot card">
                        <div class="book-info">
                            <img id="main-book-cover" src="https://images-na.ssl-images-amazon.com/images/S/compressed.photo.goodreads.com/books/1593003033l/54495910.jpg" alt="Nudge book cover" class="book-cover">
                            <div class="book-details">
                                <h4 id="main-book-title">ë„›ì§€ (Nudge)</h4>
                                <p id="main-book-author">ë¦¬ì²˜ë“œ H. íƒˆëŸ¬, ìºìŠ¤ R. ì„ ìŠ¤íƒ€ì¸</p>
                                <div id="main-book-goal" class="goal">
                                    <strong>ğŸ¯ í˜„ì¬ ëª©í‘œ (ë ˆë²¨ 2)</strong>
                                    <p>ì„ íƒ ì„¤ê³„ì˜ 3ìš”ì†Œ(ë””í´íŠ¸, í”¼ë“œë°±, ì˜¤ë¥˜ ì˜ˆìƒ)ë¥¼ ì„¤ëª…í•˜ê³ , ì‹¤ìƒí™œ ì‚¬ë¡€ 1ê°€ì§€ì”© ì°¾ì•„ë³´ê¸°.</p>
                                </div>
                            </div>
                        </div>
                        <div style="display: flex; gap: 8px;">
                           <button id="change-book-btn" class="btn" style="flex-grow: 1;">ğŸ“˜ ì±… ë³€ê²½í•˜ê¸°</button>
                           <button id="start-goal-navigator-btn" class="btn" style="flex-grow: 1;">ğŸ¯ ëª©í‘œ ì¬ì„¤ì •</button>
                        </div>
                        <div class="course-selection">
                            <h5>í•™ìŠµ ì½”ìŠ¤ ì„ íƒ <i class="tooltip-icon" id="course-tooltip-icon">?</i></h5>
                            <div class="course-buttons">
                                <button class="course-btn btn" data-duration="15">15ë¶„</button>
                                <button class="course-btn btn active" data-duration="30">30ë¶„</button>
                                <button class="course-btn btn" data-duration="45">45ë¶„</button>
                                <button class="course-btn btn" data-duration="60">60ë¶„</button>
                                <button class="course-btn btn" data-duration="90">90ë¶„</button>
                                <button class="course-btn btn" data-duration="120">120ë¶„</button>
                            </div>
                        </div>
                        <button id="start-session-btn" class="btn btn-primary">ìƒˆë¡œìš´ ì§€ì‹ íƒí—˜í•˜ê¸° (ë©”í‹°ìŠ¤ ì„¸ì…˜)</button>
                    </div>
                    <div class="sub-book-shelf-container card">
                        <h3>ğŸ“š ê´€ì‹¬ ì„œì¬ (ì„œë¸Œë¶)</h3>
                        <div class="sub-book-shelf">
                           <img src="https://image.aladin.co.kr/product/30883/29/cover500/k252830635_1.jpg" alt="Sub book cover" class="sub-book-cover">
                           <img src="https://image.aladin.co.kr/product/10/3/cover500/8932917248_2.jpg" alt="Sub book cover" class="sub-book-cover">
                           <img src="https://image.aladin.co.kr/product/33359/29/cover500/k252938250_1.jpg" alt="Sub book cover" class="sub-book-cover">
                        </div>
                    </div>
                </div>
            </div>
            
            <div id="garden" class="view">
                 <header class="view-header">
                    <h2>ğŸŒ¿ ì§€ì‹ ì •ì›</h2>
                    <p>ë‹¹ì‹ ì˜ ëª¨ë“  ì§€ì‹ ìì‚°(ì‹ë¬¼)ì´ ìë¼ê³  ìˆìŠµë‹ˆë‹¤. ìƒíƒœë¥¼ ë³´ê³  ê´€ë¦¬í•´ì£¼ì„¸ìš”.</p>
                </header>
                <div class="garden-container" id="garden-container">
                    <p class="empty-message">ì•„ì§ ì •ì›ì— ì‹ë¬¼ì´ ì—†ìŠµë‹ˆë‹¤. ë©”í‹°ìŠ¤ ì„¸ì…˜ì„ í†µí•´ ì²« ì”¨ì•—ì„ ì‹¬ì–´ë³´ì„¸ìš”!</p>
                </div>
            </div>
            
            <div id="journey" class="view">
                <header class="view-header">
                    <h2>ğŸ—ºï¸ ì§€ì  ì—¬ì • ë§µ</h2>
                    <p>ë‹¹ì‹ ì˜ ì§€ì‹ë“¤ì´ ì–´ë–»ê²Œ ì—°ê²°ë˜ì–´ ìˆëŠ”ì§€ íƒí—˜í•˜ì„¸ìš”.</p>
                </header>
                <div id="journey-map-container">
                    <svg id="journey-map-svg"></svg>
                    <p class="empty-message">ì•„ì§ íƒí—˜í•œ ì§€ì‹ì´ ì—†ìŠµë‹ˆë‹¤. ì—¬ì •ì„ ì‹œì‘í•´ë³´ì„¸ìš”!</p>
                </div>
            </div>

            <div id="metis-session-view" class="view">
                <header class="view-header" style="display: flex; justify-content: space-between; align-items: center;">
                     <button id="back-to-dashboard-btn" class="btn btn-secondary">â† ë’¤ë¡œê°€ê¸°</button>
                     <h2 style="margin:0;">ğŸ§  ë©”í‹°ìŠ¤ í•™ìŠµ ì„¸ì…˜</h2>
                     <p id="step-title" style="margin:0; min-width: 150px; text-align: right;"></p>
                 </header>
                 <div class="session-content">
                    <div id="session-goal-display" class="goal-display"></div>
                     <div id="step-1" class="step active card">
                        <div class="step-header">
                            <h4>[1/8] í•™ìŠµ ì˜ˆì¸¡ (Prediction)</h4>
                            <div class="step-timer" id="timer-step-1">03:00</div>
                        </div>
                        <p>ì œí•œ ì‹œê°„ ì•ˆì—, ìœ„ ëª©í‘œì™€ ê´€ë ¨í•˜ì—¬ ì±…ì—ì„œ ì–´ë–¤ ë‚´ìš©ì„ ë‹¤ë£° ê²ƒ ê°™ìŠµë‹ˆê¹Œ? í•µì‹¬ ë‚´ìš©ì„ ì˜ˆì¸¡í•´ë³´ì„¸ìš”.</p>
                        <textarea id="prediction-input" placeholder="ì˜ˆ: ë„›ì§€ì˜ ê°œë…ì„ ì„¤ëª…í•˜ê³ , ì‚¬ëŒë“¤ì˜ ë¹„í•©ë¦¬ì  ì„ íƒì„ ìœ ë„í•˜ëŠ” ì‚¬ë¡€ë¥¼ ë³´ì—¬ì¤„ ê²ƒ ê°™ë‹¤."></textarea>
                        <div id="prediction-options">
                            <p style="margin-bottom: 8px; font-weight: 500;">ë” ê¹Šì€ í•™ìŠµì„ ìœ„í•´ ì˜ˆì¸¡ ì‹œê°„ì„ ëŠ˜ë ¤ë³´ì‹œê² ì–´ìš”?</p>
                            <button class="btn" id="deepen-prediction-btn" data-time="420">ì‹¬í™” ì˜ˆì¸¡ (7ë¶„)</button>
                        </div>
                        <button class="btn btn-primary next-step-btn">ì˜ˆì¸¡ ì™„ë£Œ, ì§‘ì¤‘ ë…ì„œ ì‹œì‘</button>
                    </div>
                    <div id="step-2" class="step card">
                         <h4>[2/8] ì§‘ì¤‘ ë…ì„œ (Focused Reading)</h4>
                         <p>ëª©í‘œì—ë§Œ ì§‘ì¤‘í•˜ì—¬ ì±…ì„ ì½ìŠµë‹ˆë‹¤. ì¤‘ìš”í•œ ë¬¸ì¥ì„ ë°œê²¬í•˜ë©´ 'í´ë¦¬í•‘' í•˜ì„¸ìš”.</p>
                         <div id="timer-step-2" class="timer-display">00:00</div>
                         <button id="add-clipping-btn" class="btn" style="width: 100%; margin-bottom: 8px;">+ í˜„ì¬ ë¬¸ë‹¨ í´ë¦¬í•‘í•˜ê¸°</button>
                         <button class="btn btn-primary next-step-btn" style="width: 100%;">ë…ì„œ ì™„ë£Œ</button>
                    </div>
                     <div id="step-2-break" class="step card">
                         <h4>[3/8] ë‘ë‡Œ íœ´ì‹ (Brain Break)</h4>
                         <p>ì ì‹œ í•™ìŠµì„ ë©ˆì¶”ê³  ë‡Œë¥¼ ì‰¬ê²Œ í•´ì£¼ì„¸ìš”. ê°€ë²¼ìš´ ìŠ¤íŠ¸ë ˆì¹­ì´ë‚˜ ëª…ìƒì´ ì¢‹ìŠµë‹ˆë‹¤.</p>
                         <div id="timer-step-2-break" class="timer-display">05:00</div>
                         <button class="btn btn-primary next-step-btn">íœ´ì‹ ì™„ë£Œ</button>
                    </div>
                    <div id="step-3" class="step card">
                        <div class="step-header">
                            <h4>[4/8] ìƒê° ê¸°ë¡ (Brain Dump)</h4>
                            <div class="step-timer" id="timer-step-3">05:00</div>
                        </div>
                        <p>ì œí•œ ì‹œê°„ ì•ˆì—, ë°©ê¸ˆ ì½ì€ ë‚´ìš©ê³¼ ê·¸ì— ëŒ€í•œ ë‹¹ì‹ ì˜ ìƒê°ì„ ììœ ë¡­ê²Œ ê¸°ë¡í•˜ì„¸ìš”.</p>
                        <textarea id="braindump-input" placeholder="ì •ë¦¬ë˜ì§€ ì•Šì•„ë„ ê´œì°®ìŠµë‹ˆë‹¤. ë– ì˜¤ë¥´ëŠ” ëª¨ë“  ê²ƒì„ ê¸°ë¡í•˜ì„¸ìš”."></textarea>
                        <button class="btn btn-primary next-step-btn">ê¸°ë¡ ì™„ë£Œ, AI í”¼ë“œë°± ì˜ˆì¸¡ìœ¼ë¡œ</button>
                    </div>
                    <div id="step-4" class="step card">
                        <div class="step-header">
                            <h4>[5/8] AI í”¼ë“œë°± ì˜ˆì¸¡ (Metacognition)</h4>
                            <div class="step-timer" id="timer-step-4">05:00</div>
                        </div>
                        <p>ì œí•œ ì‹œê°„ ì•ˆì—, AIê°€ ë‹¹ì‹ ì˜ ê¸°ë¡ì— ëŒ€í•´ ì–´ë–¤ í”¼ë“œë°±ì„ ì¤„ ê²ƒ ê°™ìŠµë‹ˆê¹Œ? ë‹¹ì‹ ì´ ë†“ì¹œ ë¶€ë¶„ì€ ë¬´ì—‡ì¼ê¹Œìš”?</p>
                        <textarea id="ai-prediction-input" placeholder="ì˜ˆ: ê°œë… ì„¤ëª…ì€ ì˜í–ˆì§€ë§Œ, ê° ìš”ì†Œê°€ ì–´ë–»ê²Œ ìƒí˜¸ì‘ìš©í•˜ëŠ”ì§€ì— ëŒ€í•œ ì„¤ëª…ì´ ë¶€ì¡±í•˜ë‹¤ê³  ì§€ì í•  ê²ƒ ê°™ë‹¤."></textarea>
                        <button class="btn btn-primary next-step-btn">ì˜ˆì¸¡ ì™„ë£Œ, ë¹„êµ ë¶„ì„ìœ¼ë¡œ</button>
                    </div>
                    <div id="step-5" class="step card">
                        <div class="step-header">
                            <h4>[6/8] ë¹„êµ ë¶„ì„ (The Reveal)</h4>
                        </div>
                        <p>ìì‹ ì˜ ì´í•´ë„ì™€ ì‹¤ì œ ì´í•´ë„ ì‚¬ì´ì˜ ê²©ì°¨(Gap)ë¥¼ ê°ê´€ì ìœ¼ë¡œ ì¸ì§€í•˜ì„¸ìš”.</p>
                        <div class="comparison-grid">
                            <div class="comparison-col"><h5>ğŸ¤” ë‚´ ìƒê°</h5><div id="reveal-my-thoughts" class="comparison-content"></div></div>
                            <div class="comparison-col"><h5>ğŸ¤– AI í”¼ë“œë°±</h5><div id="reveal-ai-feedback" class="comparison-content"></div></div>
                            <div class="comparison-col"><h5>ğŸ”® ë‚´ ì˜ˆì¸¡</h5><div id="reveal-my-prediction" class="comparison-content"></div></div>
                            <div class="comparison-col"><h5>â­ ì „ë¬¸ê°€ ìš”ì•½</h5><div id="reveal-expert-summary" class="comparison-content"></div></div>
                        </div>
                        <button class="btn btn-primary next-step-btn">ë¶„ì„ ì™„ë£Œ, ì§ˆë¬¸ ì¶”ì¶œë¡œ</button>
                    </div>
                    <div id="step-6" class="step card">
                        <div class="step-header">
                            <h4>[7/8] í•µì‹¬ ì§ˆë¬¸ ì¶”ì¶œ</h4>
                            <div class="step-timer" id="timer-step-6">05:00</div>
                        </div>
                        <p>ì œí•œ ì‹œê°„ ì•ˆì—, ë‹¹ì‹ ì˜ ìƒê°ê³¼ AIì˜ ë¶„ì„ ì‚¬ì´ì—ì„œ ë°œê²¬í•œ 'ê²©ì°¨(Gap)'ë¥¼ í•´ì†Œí•  í•µì‹¬ ì§ˆë¬¸ í•˜ë‚˜ë¥¼ ë½‘ì•„ë³´ì„¸ìš”.</p>
                        <textarea id="gap-input" placeholder="ì˜ˆ: ë‚˜ëŠ” ê°œë…ì˜ ë‚˜ì—´ì— ê·¸ì³¤ì§€ë§Œ, AIëŠ” 'ê°œë… ê°„ì˜ ì—°ê²°ì„± ë¶€ì¡±'ì„ ì§€ì í–ˆë‹¤. ê·¸ë ‡ë‹¤ë©´, ê° ê°œë…ë“¤ì€ ì–´ë–»ê²Œ ìœ ê¸°ì ìœ¼ë¡œ ì—°ê²°ë˜ëŠ”ê°€?"></textarea>
                        <button class="btn btn-primary next-step-btn">ì§ˆë¬¸ ì¶”ì¶œ ì™„ë£Œ, ì²´í™” ê¸€ì“°ê¸°ë¡œ</button>
                    </div>
                    <div id="step-7" class="step card">
                        <div class="step-header">
                             <h4>[8/8] ì™„ë²½í•œ ì²´í™”ë¥¼ ìœ„í•œ ê¸€ì“°ê¸°</h4>
                             <div class="step-timer" id="timer-step-7">05:00</div>
                        </div>
                         <p>ì œí•œ ì‹œê°„ ì•ˆì—, ë°©ê¸ˆ ì¶”ì¶œí•œ ì§ˆë¬¸ì— ëŒ€í•œ ë‹µì„ ìŠ¤ìŠ¤ë¡œ ì„¤ëª…í•˜ëŠ” í•œ í¸ì˜ ê¸€ì„ ì™„ì„±í•˜ì„¸ìš”.</p>
                         <textarea id="final-writing-input" placeholder="6ë‹¨ê³„ì—ì„œ ë½‘ì•„ë‚¸ ì§ˆë¬¸ì„ ë°”íƒ•ìœ¼ë¡œ, ì˜¤ëŠ˜ ë°°ìš´ ë‚´ìš©ì„ ë‹¤ë¥¸ ì‚¬ëŒì—ê²Œ ì„¤ëª…í•˜ë“¯ ììœ ë¡­ê²Œ ê¸€ì„ ì‘ì„±í•´ë³´ì„¸ìš”."></textarea>
                         <button id="finish-session-btn" class="btn btn-primary">ê¸€ì“°ê¸° ì™„ë£Œ, ì§€ì‹ ì •ì œì†Œë¡œ ë³´ë‚´ê¸°</button>
                     </div>
                 </div>
            </div>

            <div id="clipping-review-view" class="view">
                <header class="view-header" style="display: flex; justify-content: space-between; align-items: center;">
                    <button id="back-to-dashboard-from-review" class="btn btn-secondary">â† ëŒ€ì‹œë³´ë“œë¡œ ëŒì•„ê°€ê¸°</button>
                    <h2 style="margin:0;">ì§€ì‹ ë¦¬ë·°</h2>
                    <p id="clipping-review-header" style="margin:0;"></p>
                </header>
                <div id="clipping-review-content" class="card"></div>
                <div class="modal-controls">
                    <button id="finish-review-btn" class="btn btn-primary">ë¦¬ë·° ì™„ë£Œ</button>
                </div>
            </div>
        </main>
    </div>
    
    <div id="course-tooltip">
        <h6>ì–¸ì œ ì–´ë–¤ ì½”ìŠ¤ë¥¼ ì„ íƒí• ê¹Œìš”?</h6>
        <p><strong>15ë¶„:</strong> ìíˆ¬ë¦¬ ì‹œê°„, í•µì‹¬ ê°œë… 1ê°œë§Œ ë¹ ë¥´ê²Œ í™•ì¸í•  ë•Œ</p>
        <p><strong>30ë¶„:</strong> ì¶œí‡´ê·¼ê¸¸, ì§‘ì¤‘í•´ì„œ 1~2ê°œ ì†Œì£¼ì œë¥¼ í•™ìŠµí•  ë•Œ (ê¸°ë³¸)</p>
        <p><strong>45ë¶„ ~ 120ë¶„:</strong> ì£¼ë§ ë“± ê¹Šì€ ëª°ì…ì´ í•„ìš”í•  ë•Œ</p>
    </div>

    <div id="loader" class="loader-overlay">
        <div class="loader"></div>
        <div class="loader-text">AIê°€ ë¶„ì„ ì¤‘ì…ë‹ˆë‹¤...</div>
    </div>

    <div id="book-explorer-modal-overlay" class="modal-overlay">
        <div id="book-explorer-modal" class="modal-content"></div>
    </div>
    <div id="goal-navigator-modal-overlay" class="modal-overlay">
        <div id="goal-navigator-modal" class="modal-content"></div>
    </div>
     <div id="challenge-modal-overlay" class="modal-overlay">
        <div id="challenge-modal" class="modal-content"></div>
    </div>
    <div id="dashboard-modal-overlay" class="modal-overlay">
        <div id="dashboard-modal-content" class="modal-content" style="max-width: 800px;"></div>
    </div>
    <div id="clipping-modal-overlay" class="modal-overlay">
        <div class="modal-content">
            <div class="modal-header"><h3>ì§€ì‹ ì¡°ê° í´ë¦¬í•‘</h3><p>ì±…ì—ì„œ ë°œê²¬í•œ í•µì‹¬ ë‚´ìš©ì„ ë¶™ì—¬ë„£ìœ¼ì„¸ìš”.</p></div>
            <div class="modal-body">
                <textarea id="clipping-input" placeholder="ì—¬ê¸°ì— ì¤‘ìš”í•œ ë¬¸ë‹¨ì„ ë³µì‚¬-ë¶™ì—¬ë„£ê¸° í•˜ì„¸ìš”..."></textarea>
            </div>
            <div class="modal-controls">
                <button id="cancel-clipping-btn" class="btn">ì·¨ì†Œ</button>
                <button id="save-clipping-btn" class="btn btn-primary">ì €ì¥í•˜ê¸°</button>
            </div>
        </div>
    </div>
    
    <script src="https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js" type="module"></script>
    <script src="https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js" type="module"></script>
    <script src="https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js" type="module"></script>
    <script src="./js/main.js" type="module"></script>
</body>
</html>